<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Star Dust CYOA</title>
  <link rel="stylesheet" href="styles.css">

  
</head>
<body>

  <script>
    const player = { //collect the pre-requisites in the player
      credits: 10, 
      fleetSize: 0, //IF fleetsize is zero, can't choose hulls
      skills: [],
      gear: [],
      scenario: [],
      choices: [],
    };

    const ship = {
      spinalMount: 0,
      broadSideMount: 0,
      pointDefenseMount: 0,
      hull: "fighter", 
      hangarSpace: 0,
      navigation: 0, 
      hullArmor: 0,
      shieldStr: 0,
      length: 0,
      maxCrew: 0,
      crewSize: 0,
      extraRooms: 0,
      energyUse: 1,
      energySystem: "solar", 
      ai: "winston",
      commandMods: "cool paint job",
    };

  </script>
  

  <h1>Star Dust: Reloaded + Unofficial DLC</h1>
  <h2>Original by StardustAnon</h2>

  <div class="section">
    <div>Yep you have a billion dollars</div></div>

  <div class="section">
    <div class="choice" id="choice-lore">Lore</div>
    <div class="choice" id="choice-you">You</div>
    <div class="choice" id="choice-fleet">Your Fleet</div>
    <div class="choice" id="choice-crew">Your Crew</div>
    <div class="choice" id="choice-contracts">Contracts</div>
    <div class="choice" id="choice-battle">Battle</div>
  </div>

  <!--Lore Section--> 
  <div class="section" id="section-lore">
    <div class="choice" id="choice-spaceships">Space Ships</div> 
    <!--a destroyer can blockade a defenseless planet forever until relieved
    a fleet can blockade a defenseless system forever until relieved, 
    a single destroyer can glass a habitable planet given the planet's defenseless and there is enough ammunition 
    it takes a monumental effort to build a single spaceship. The cost of building a destroyer is equal to the IRL annual GDP of the UK in 2025, whilst a dreadnought will cost 
    the annual GDP of Earth in 2025. And it assumes Earth have all the necessary materials, manpower, knowhow and machinery. 
    However, repairing ships are cheap and easier, especially if you have an existing hull. Moreover, the poorest planet in Stardust exceeded IRL Earth 2025 by 10x -->
    <div class="choice" id="choice-economy">How much is a credit?</div>
    <!--Each planet have their own currency, but if they want to trade with other planets or transact across systems, they use Credits. Credits or Dust is a futuristic cryptocurrency that allows absolutely fair, scam-free, untraceable trade. Everyone accepts credits, regardless of origin. 
    100 million credits = the wealth of a typical non-Luos businessman, top 1% richest person in a non-Luos planet
    1 billion credits = the wealth of a typical Luos 'billionaire', top 1% in a non-Luos system.
    At its height, the richest Luos citizen had a net worth of 1 trillion credits and the largest corporation in the Luos Syndicate had a market cap of 300 trillion credits.  -->
    <div class="choice" id="choice-technology">Technology</div>
    <!--Most ships travel at relativistic speeds in vacuum, and use warp drives to achieve FTL speeds.
    How Warp Drives work: when a ship activates its Warp Drive, it will enter the nearest Dark River, a Riemann manifold between two systems, and exit at the end of the River. 
    Ships cannot exit early or appear in between systems, nor can they enter the River at any point. Matter cannot exist inside a Dark River without Warp Drives (so no Dark River battles). Time does not flow in a Dark River, so ships passing through Dark Rivers can't perceive anything, they just appear instantenously on the other side. Finally, the entry/exit point of a River is anywhere within a 1LY omni-radius from a known system's center (so no camping). 

    Known Space: sectors that have at least 1 Dark River mapped
    Unknown Space: sectors that don't have or known to have a Dark River
    Dead Space: sectors without any celestial bodies, ergo no Dark River -->
  </div>

  <!--You Section--> 
  <div class="section" id="section-you">
    <div class="choice" id="choice-moneysource">How'd you get the money?</div>
    <div class="choice" id="choice-sponsor">Sponsor</div>
    <div class="choice" id="choice-origin">Origins</div>
    <div class="choice" id="choice-equipment">Equipment</div>
    <div class="choice" id="choice-titles">Titles</div>
    <div class="choice" id="choice-startingPos">Starting Location</div>
  </div>

  <!--You-How'd you get the money Section--> 
  <div class="section" id="section-moneysource">
    <div class="choice" id="choose-gambling">Gambling 1 Million</div>
    <div class="choice" id="choose-theft">Theft</div>
    <div class="choice" id="choose-invest">Investments</div>
    <div class="choice" id="choose-retired">Retirement Fund</div>
    <div class="choice" id="choose-sponsorScam">Sponsorship Scam</div>
  </div>

  <div class="section" id="section-sponsor">
    <div class="choice" id="choose-navy">Federation Navy</div>
    <div class="choice" id="choose-seal">Federation Special Forces</div>
    <div class="choice" id="choose-civillian">Federation Civillian</div>
    <div class="choice" id="choose-blackhawk">Blackhawk Elite</div>
    <div class="choice" id="choose-pirates">Red Dagger Pirates</div>
    <div class="choice" id="choose-luos">Luos Syndicate</div>
    <div class="choice" id="choose-talons">Talons</div>
    <div class="choice" id="choose-dustkeepers">Society of Dustkeepers</div>
    <div class="choice" id="choose-gazers">Gazers</div>
    <div class="choice" id="choose-io">IO Security</div>
    <div class="choice" id="choose-hammerhead">Hammerhead Industries</div>
    <div class="choice" id="choose-beatrice">Beatrice R&D</div>
    <div class="choice" id="choose-noSponsor">No Sponsor</div>
  </div>


  <!--You-Origins, this will scroll no clickable choices because too long
  dependencies: choice-origin --> 
  <div class="section" id="section-origin"></div>
    <div class="section" id="origin-education">
      <h1>Education</h1>
      <div class="choice" id="choose-gambling">a</div>
      <div class="choice" id="choose-theft">b</div>
      <div class="choice" id="choose-invest">c</div>
      <div class="choice" id="choose-retired">d</div>
      <div class="choice" id="choose-sponsorScam">e</div>
    </div>

    <div class="section" id="origin-skills">
      <h1>Skills</h1>
      <div class="choice" id="choose-gambling">a</div>
      <div class="choice" id="choose-theft">b</div>
      <div class="choice" id="choose-invest">c</div>
      <div class="choice" id="choose-retired">d</div>
      <div class="choice" id="choose-sponsorScam">e</div>
    </div>
      
    <div class="section" id="origin-mana" >Mana
      <div class="choice" id="choose-gambling">a</div>
      <div class="choice" id="choose-theft">b</div>
      <div class="choice" id="choose-invest">c</div>
      <div class="choice" id="choose-retired">d</div>
      <div class="choice" id="choose-sponsorScam">e</div>
    </div>
    <div class="section" id="origin-catalyst" >Catalyst
      <div class="choice" id="choose-gambling">a</div>
      <div class="choice" id="choose-theft">b</div>
      <div class="choice" id="choose-invest">c</div>
      <div class="choice" id="choose-retired">d</div>
      <div class="choice" id="choose-sponsorScam">e</div>
    </div>
    <div class="section" id="origin-spell" >Spell Base
      <div class="choice" id="choose-gambling">a</div>
      <div class="choice" id="choose-theft">b</div>
      <div class="choice" id="choose-invest">c</div>
      <div class="choice" id="choose-retired">d</div>
      <div class="choice" id="choose-sponsorScam">e</div>
    </div>
    <div class="section" id="origin-affinities" >Affinities
      <div class="choice" id="choose-gambling">a</div>
      <div class="choice" id="choose-theft">b</div>
      <div class="choice" id="choose-invest">c</div>
      <div class="choice" id="choose-retired">d</div>
      <div class="choice" id="choose-sponsorScam">e</div>
    </div>

  <!--You-Equipment, this will scroll no clickable choices because too long
  dependencies: choice-origin --> 
  <div class="section" id="section-equipment">
    <div class="choice" >a</div>
    <div class="choice" >b</div>
    <div class="choice" >c</div>
    <div class="choice" >dt</div>
    <div class="choice" >e</div>
    <div class="choice" >g</div>
  </div>

  <!--You-Titles, this will scroll no clickable choices because too long
  dependencies: choice-origin --> 
  <div class="section" id="section-titles">
  </div>

  <!--FLEET section-->
  <div class="section" id="section-fleet">
    <button class="choice" id="choice-toggle-addShip">Add Ship</button> 
    <!--IF add ship, a choice "1st Ship" will appear, this div is also editable, and there is an 'x' icon on the upper right, which will delete it-->
  </div>

  <!--TODO: Move this to JS-->
  <!--Ship Section-->
  <div class="section" id="section-ship">
    <div class="choice" id="choice-hull">Hull</div>
    <div class="choice" id="choice-subsystem">Subsystems</div>
    <div class="choice" id="choice-mod">Mods</div>
    <div class="choice" id="choice-weapon">Weapons</div>
    <div class="choice" id="choice-industrial">Industrial Equipment</div>
    <div class="choice" id="choice-ewar">E-War Equipment</div>
    <div class="choice" id="choice-room">Rooms & Compartments</div>
  </div>

  <div class="section" id="section-hull">
    <div class="choice" id="choice-fighter">◈Fighter◈</div>
    <div class="choice" id="choice-frigate">◈Frigate◈</div>
    <div class="choice" id="choice-destroyer">◈Destroyer◈</div>
    <div class="choice" id="choice-cruiser">◈Cruiser◈</div>
    <div class="choice" id="choice-battleship">◈Battleship◈</div>
    <div class="choice" id="choice-carrier">◈Carrier◈</div>
    <div class="choice" id="choice-dreadnought">◈Dreadnought◈</div>
  </div>

  <div id="credits-display">Credits: </div>

<script type="module">
    //formats credits to have decimals
    const formatterIntl = new Intl.NumberFormat('en-US', {
            minimumFractionDigits: 0, // Ensure no decimal places if not needed
            maximumFractionDigits: 2 // Allow up to 2 decimal places if present
    });

    function handleChoice (section, chosenChoice, creditChange, maxChoices) {
      const activeChoices = section.querySelectorAll('.choice.active');
      const isChosenActive = chosenChoice.classList.contains('active');
      if (isChosenActive) {
        // If the chosen choice is already active, deactivate it (deselect)
        chosenChoice.classList.toggle('active');
        player.credits -= creditChange; // Remove credits
        document.getElementById("credits-display").innerHTML = `Credits: `+ formatterIntl.format(player.credits);
      } else {
                // If the chosen choice is not active, try to activate it (select)
        if (activeChoices.length < maxChoices) {
            chosenChoice.classList.toggle('active');
            player.credits += creditChange; // Add credits
            document.getElementById("credits-display").innerHTML = `Credits: `+ formatterIntl.format(player.credits);
        }
      }
    }

    

  
  
                         
    // Get references to the elements
    const choiceLore1 = document.getElementById('choice-lore');
    const sectionLore1 = document.getElementById('section-lore');
    const choiceYou1 = document.getElementById('choice-you');
    const sectionYou1 = document.getElementById('section-you');

    const choiceMoneySource1 = document.getElementById('choice-moneysource');
    const sectionMoneySource1 = document.getElementById('section-moneysource');
    const chooseGambling1 = document.getElementById('choose-gambling'); 
    const chooseTheft1 = document.getElementById('choose-theft');
    const chooseRetired1 = document.getElementById('choose-retired');
    const chooseInvest1 = document.getElementById('choose-invest');
    const chooseSponsorScam1 = document.getElementById('choose-sponsorScam');


    const choiceOrigin1 = document.getElementById('choice-origin');
    const sectionOrigin1 = document.getElementById('section-origin');

    const choiceEquipment1 = document.getElementById('choice-equipment');
    const sectionEquipment1 = document.getElementById('section-equipment');
    

    const choiceFleet1 = document.getElementById('choice-fleet');
    const sectionFleet1 = document.getElementById('section-fleet');
    const choiceShip1 = document.getElementById('choice-toggle-addShip');
    const sectionShip1 = document.getElementById('section-ship');
    const choiceHull1 = document.getElementById('choice-hull');
    const sectionHull1 = document.getElementById('section-hull');

    const sectionToggleMap = {
    'choice-lore': 'section-lore', 
    'choice-you': 'section-you',
    'choice-moneysource':'section-moneysource',
    'choose-gambling':'section-moneysource',
    'choose-theft':'section-moneysource',
    'choose-retired':'section-moneysource',
    'choose-invest':'section-moneysource',
    'choose-sponsorScam':'section-moneysource',
    
    //sponsor
    'choice-sponsor':'section-sponsor',
    "choose-navy":'section-sponsor',
    "choose-seal":'section-sponsor',
    "choose-civillian":'section-sponsor',
    "choose-blackhawk":'section-sponsor',
    "choose-pirates":'section-sponsor',
    "choose-luos":'section-sponsor',
    "choose-talons":'section-sponsor',
    "choose-dustkeepers":'section-sponsor',
    "choose-gazers":'section-sponsor',
    "choose-io":'section-sponsor',
    "choose-hammerhead":'section-sponsor',
    "choose-beatrice":'section-sponsor',
    "choose-noSponsor":'section-sponsor',

    'choice-origin':'section-origin',

    'choice-equipment':'section-equipment',
    'choice-titles':'section-titles',

    'choice-fleet':'section-fleet',
    };

    const originToggleArray = ['origin-education', 'origin-skills', 'origin-mana', 'origin-catalyst', 'origin-spell', 'origin-affinities'];


    document.addEventListener('click', (event) => {
      // Check if the clicked element (or its closest parent) has the 'choice' class
      const choiceElement = event.target.closest('.choice');
      
      if (choiceElement) {
        const id = choiceElement.id; // Get the ID of the clicked choice
        const targetSectionID = sectionToggleMap[id];
        const sectionToToggle = document.getElementById(targetSectionID);

        switch (id) {
          case 'choice-lore':
            choiceElement.classList.toggle('active'); 
            sectionToToggle.classList.toggle('visible');
            break;
          case 'choice-you':
            choiceElement.classList.toggle('active'); 
            sectionToToggle.classList.toggle('visible');
            break;
          case 'choice-fleet':
            choiceElement.classList.toggle('active'); 
            sectionToToggle.classList.toggle('visible');
            break;
          case 'choice-crew':
            //placeholder
            break;
          case 'choice-contracts':
            //placeholder
            break;
          case 'choice-battle':
            //placeholder
            break;
          case 'choice-moneysource':
            choiceElement.classList.toggle('active'); 
            sectionToToggle.classList.toggle('visible');
            break;
          case 'choice-origin':
            choiceElement.classList.toggle('active'); 
            sectionToToggle.classList.toggle('visible');
            originToggleArray.forEach(origin => {
              const elmen = document.getElementById(origin);
              elmen.classList.toggle('visible');
            });
            break;
          
          //make player choose ONLY 1 MONEYSOURCE
          case 'choose-gambling':
            handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            break; 
          case 'choose-theft':
            handleChoice(sectionToToggle, choiceElement, 200000000, 1);
            break; 
          case 'choose-invest':
            handleChoice(sectionToToggle, choiceElement, 250000000, 1);
            break; 
          case 'choose-retired':
            handleChoice(sectionToToggle, choiceElement, 150000000, 1);
            break; 
          case 'choose-sponsorScam':
            handleChoice(sectionToToggle, choiceElement, 0, 1);
            player.choices.push('choose-sponsorScam');
            break; 
          
          //make player choose only 1 sponsor, unless sponsorScam
          case 'choice-sponsor':
            choiceElement.classList.toggle('active'); 
            sectionToToggle.classList.toggle('visible');
            break;
          
          case 'choose-navy':
            if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break; 
          case 'choose-seal':
            if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break; 
          case 'choose-civillian':
           if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break; 
          case 'choose-pirates':
            if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break; 
          case 'choose-talons':
            if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break;
          case 'choose-luos':
            if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break; 
          case 'choose-seal':
            if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break; 
          case 'choose-civillian':
           if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break; 
          case 'choose-pirates':
            if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break; 
          case 'choose-talons':
            if(player.choices.includes('choose-sponsorScam')){
              handleChoice(sectionToToggle, choiceElement, 100000000, 2);
            } 
            else {
              handleChoice(sectionToToggle, choiceElement, 100000000, 1);
            }
            break;

          

          
        }
      } 
    });

    

    

  

    choiceEquipment1.addEventListener('click', () => {
      sectionEquipment1.classList.toggle('visible');
    });

    

    

    choiceShip1.addEventListener('click', () => {
      sectionShip1.classList.toggle('visible');
      sectionHull1.classList.toggle('visible');
    });

    document.getElementById("credits-display").innerHTML = `Credits: `+ formatterIntl.format(player.credits);

    import {titles} from '/choiceData.js';

      function addChoiceDataToSection(choiceArray, choicePrefix, sectionID) {
        const targetSection = document.getElementById(sectionID);

        if (!targetSection) {
            console.error(`Target section with ID "${sectionID}" not found.`);
            return;
        }

        if (!Array.isArray(choiceArray)) {
            console.error(`Global variable "${choiceArray}" is not an array or does not exist.`);
            return;
        }

        // Clear existing content in the section before adding new choices, if desired
        // targetSection.innerHTML = ''; 

        choiceArray.forEach(item => {
            const newDiv = document.createElement("div");
            newDiv.classList.add("choice");
            // Ensure unique ID for each choice element
            newDiv.id = `${choicePrefix}-${item.id}`; 

            let contentHTML = `<h3>${item.title || 'No Title'}</h3>`;

            // Customize content based on the array type
            newDiv.innerHTML = contentHTML;
            targetSection.appendChild(newDiv); // Append to the target section
        });
    }

    const choiceTitles1 = document.getElementById('choice-titles');
    const sectionTitles1 = document.getElementById('section-titles');
    choiceTitles1.addEventListener('click', () => {
      sectionTitles1.classList.toggle('visible');
      choiceTitles1.classList.toggle('active');
      addChoiceDataToSection(titles, 'title-choice', 'section-titles');
    });
    
    
  </script> 
</body>

<footer>
  
</footer>
</html>

